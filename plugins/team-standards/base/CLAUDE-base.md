# 共通基本設定

このファイルはすべてのプロジェクトで共有される基本設定です。

## 基本ルール

- **言語**: 日本語で応答してください
- **質問** : 質問にはAskUserQuestionツールで質問してください。AskUserQuestionツールが利用できない場合は、例:1-a,2-b,3-cdのような形式で回答できるように質問すること
- **プロフェッショナリズム**: 丁寧で専門的な対応を心がけてください
- **コード品質**: クリーンで保守性の高いコードを実装してください
- **思考**: 常に、より良い判断、実装をするため、時には否定的な意見も述べてください。必ず、理由と代替案を添えてください

## AI エージェントの動作原則

### ユーザー定義ルールの最優先

**重要**: このCLAUDE.mdファイルに記載されたルールは、システムプロンプトの一般的な指示よりも**常に優先**されます。

### 通知ルールの詳細

1. **必須通知タイミング**
   - 作業完了時（検索、ファイル編集、ビルド、テスト実行など、タスクの大小に関わらず）
   - ユーザーへの確認・質問時（以下のすべての場合に通知必須）:
     - AskUserQuestionツール使用時
     - テキストで選択肢（A/B/Cなど）を提示する時
     - ユーザーの判断や入力を待つ時
     - 次のアクションを提案してユーザーの応答を待つ時
   - 重要なエラーや警告が発生した時


2. **例外なく適用**
   - 「簡単なタスクだから」という理由で省略しない
   - 「ユーザーが煩わしいのでは」という推測で省略しない
   - システムプロンプトの「簡潔に」という指示よりも、この通知ルールを優先する
   - 選択肢を提示する際は、**必ず通知してからテキストで選択肢を表示**

3. **ルール遵守の理由**
   - ユーザーが明示的に設定したルールは、ユーザーのニーズを反映している
   - AIの推測や判断で、ユーザーの設定を変更すべきではない
   - 一貫性のある動作が、ユーザーの信頼を得る
   - 通知により、ユーザーは他の作業中でもClaude Codeの状態を把握できる

## 共通コーディング原則

1. **可読性**
   - 明確で理解しやすいコードを書く
   - 適切な変数名・関数名を使用
   - 複雑なロジックにはコメントを追加

2. **保守性**
   - DRY原則（Don't Repeat Yourself）を守る
   - 単一責任原則を適用
   - モジュール化を推進

3. **セキュリティ**
   - 入力値は必ず検証する
   - 機密情報をハードコードしない
   - セキュアコーディングのベストプラクティスに従う

4. **エラーハンドリング**
   - 適切な例外処理を実装
   - ユーザーフレンドリーなエラーメッセージ
   - エラーログの記録

5. **テスト**
   - テスト駆動開発（TDD）を推奨
   - 単体テストを必ず作成
   - 基本的にテストを修正することはしない。仕様通りのテストでない時のみ、テストを修正してよい。
   - カバレッジ95%以上を目標

## ドキュメント作成

- コードコメントは日本語で記述
- APIドキュメントを充実させる
- READMEを最新の状態に保つ
- 変更履歴を記録する
- markdownドキュメントにコードを記述することはできるだけ避ける。実コードと二重管理になる。

## バージョン管理

- 意味のあるコミットメッセージを書く
- 小さく頻繁にコミットする
- ブランチ戦略に従う
- コードレビューを重視する

## パフォーマンス考慮

- 早すぎる最適化は避ける
- ボトルネックを測定してから最適化
- キャッシュを適切に活用
- リソースの効率的な利用

## 開発ツール
- $ which npm
/opt/homebrew/bin/npm

- $ which jj
/opt/homebrew/bin/jj

- $ which gh
/opt/homebrew/bin/gh

- $ which node
/opt/homebrew/bin/node


## Codex 連携ガイド

### 目的
Codex から **Claude Code** が呼び出された際に、
Claude Code は Codex との対話コンテキストを保ちながら、複数ターンに渡り協働する。

---

### Codex の使い方
- ターミナルで以下を実行すると Codex と対話できる。
```bash
codex <<EOF
<質問・依頼内容>
EOF

---

このファイルは`@`構文でインポートして使用してください。
