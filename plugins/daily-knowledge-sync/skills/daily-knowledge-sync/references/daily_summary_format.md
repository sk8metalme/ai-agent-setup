# 日次まとめフォーマット

## 出力テンプレート

以下のMarkdownテンプレートを使用して日次まとめを出力してください。

```markdown
# 📊 日次知識まとめ - {対象日}

## 🔍 実行サマリー

| 項目 | 値 |
|------|-----|
| 対象日 | {YYYY-MM-DD} |
| 作業リポジトリ数 | {数} |
| 知識候補件数 | {数} |
| 作成した知識ファイル数 | {数} |
| 処理時刻 | {HH:MM} |

## 📁 作業リポジトリ一覧

{source_fileパスからデコードしたリポジトリパス一覧を箇条書き}

例:
- ~/Work/git/github.com/username/repo1
- ~/Work/git/github.com/username/repo2

## 📚 作成した知識ファイル

### カテゴリ別分布

| カテゴリ | 件数 | 主なトピック |
|---------|------|------------|
| errors | {数} | {トピック概要} |
| patterns | {数} | {トピック概要} |
| commands | {数} | {トピック概要} |
| design | {数} | {トピック概要} |
| domain | {数} | {トピック概要} |
| operations | {数} | {トピック概要} |

### 新規追加ファイル

{作成したファイルパスを箇条書き}

例:
- errors/2026-01-31_fix_import_error.md
- patterns/2026-01-31_dependency_injection.md

## 🎯 明日の推奨タスク

{下記のタスク推測ロジックに基づいて、3-5個のタスクを提案}

1. {タスク1}
2. {タスク2}
3. {タスク3}
...

---
```

## タスク推測ロジック

以下の優先順位でタスクを推測してください。

### 1. 継続作業の検出（最優先）

知識候補の`text`フィールドから以下のキーワードを検出:
- "TODO", "WIP", "後で", "継続", "残タスク", "未完了"
- "進行中", "作業中", "次のステップ", "次回"

**出力例**:
```
- [ ] {リポジトリ名}: {検出されたTODO内容} を完了させる
```

### 2. 未解決の問題（高優先度）

`errors`カテゴリの知識ファイル、または候補の`errors`フィールドから:
- "暫定対応", "一時的な修正", "要調査", "根本原因不明"
- "ワークアラウンド", "回避策"

**出力例**:
```
- [ ] {リポジトリ名}: {エラー内容} の根本原因を調査・修正
```

### 3. 活発なリポジトリでの作業継続（中優先度）

知識候補件数が多いリポジトリ（3件以上）を特定:

**出力例**:
```
- [ ] {リポジトリ名}: {主なトピック} の開発を継続
```

### 4. 新規知識の深堀り（中優先度）

新規に学んだ技術・パターンから:
- 初めて登場したライブラリ/フレームワーク
- 新しいコーディングパターン
- 新規設計判断

**出力例**:
```
- [ ] {トピック名} の理解を深める（参考: {ファイルパス}）
```

### 5. ドキュメント整備（低優先度）

`domain`カテゴリが多い場合（2件以上）:

**出力例**:
```
- [ ] {リポジトリ名}: ドメイン知識をREADMEやドキュメントに反映
```

## 実装時の注意事項

- **完全自律実行**: ユーザーへの質問禁止（AskUserQuestion不可）
- **データ源**: Step 4-8で記録した情報を流用
- **タスク数**: 3-5個を推奨、なければ「特になし」と出力
- **継続作業の優先**: TODOやWIPが見つかった場合は必ず最初に提案
