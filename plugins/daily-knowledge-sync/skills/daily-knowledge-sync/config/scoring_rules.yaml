# スコアリングルール設定
# 知識の価値を0-100点で評価

# 閾値設定
thresholds:
  accept: 40      # この点数以上で採用
  maybe: 20       # この点数以上でレビュー候補
  reject: 20      # この点数未満で除外

# ポジティブスコア（加点）
positive_scores:
  # エラー解決（実際のスタックトレースを含む）
  error_resolution:
    score: 20
    patterns:
      - "Traceback"
      - "Stack trace"
      - "at .*:\\d+"  # スタックトレース行
      - "Exception in thread"
      - "Error:.*at line \\d+"

  # 問題解決（解決策を含む）
  problem_solution:
    score: 25
    patterns:
      - "解決策:"
      - "解決方法:"
      - "修正方法:"
      - "対処法:"
      - "Solution:"
      - "Fix:"
      - "Workaround:"
      - "How to fix"

  # 便利なツール使用
  useful_tools:
    score: 15
    tools:
      - "grep"
      - "sed"
      - "awk"
      - "find"
      - "jq"
      - "git"
      - "docker"
      - "gh"
      - "npm"

  # コード例を含む
  code_examples:
    score: 15
    patterns:
      - "```"
      - "例:"
      - "Example:"
      - "実装例:"
      - "サンプル:"

  # 説明・理由を含む
  explanation:
    score: 10
    patterns:
      - "理由:"
      - "なぜなら"
      - "これにより"
      - "その結果"
      - "Reason:"
      - "Because"
      - "This is because"
      - "As a result"

  # ベストプラクティス言及
  best_practices:
    score: 15
    patterns:
      - "ベストプラクティス"
      - "推奨"
      - "注意点"
      - "重要"
      - "Best practice"
      - "Recommended"
      - "Important"
      - "Note:"

  # 複数ステップの手順
  multi_step:
    score: 10
    patterns:
      - "1\\."
      - "2\\."
      - "3\\."
      - "Step 1"
      - "Step 2"
      - "手順1"
      - "手順2"

# ネガティブスコア（減点）
negative_scores:
  # 進行中・未完了
  work_in_progress:
    score: -15
    patterns:
      - "WIP"
      - "TODO"
      - "FIXME"
      - "作業中"
      - "実装中"
      - "調査中"

  # コンテキスト不足
  lack_of_context:
    score: -10
    patterns:
      - "^[^。!?\\n]{1,30}$"  # 短すぎる一行
      - "^\\w+$"  # 単語のみ

  # 質問のみ（回答なし）
  question_only:
    score: -10
    patterns:
      - "？$"
      - "\\?$"
      - "どうすれば"
      - "どのように"
      - "なぜ"
      - "How to"
      - "Why"
      - "What is"

# ロール重み
role_weights:
  assistant: 1.2    # AIの回答は重視
  user: 1.0         # ユーザーの質問も公平に評価
  system: 0.0       # システムメッセージは除外

# 文字数ボーナス
length_bonus:
  # 適切な長さにボーナス
  optimal_min: 100
  optimal_max: 2000
  bonus: 5

  # 短すぎる場合のペナルティ
  too_short: 50
  penalty: -10

  # 長すぎる場合のペナルティ
  too_long: 5000
  penalty: -5
